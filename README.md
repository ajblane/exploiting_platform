# exploited platform

* linux kernel: 2.6.38
* rootfs.ext4 has glibc 2.13 but not supports dynamic link
* currently only suppot static link (-static)

## Prerequisites

OS: ubuntu 14.04/ 11.04

Install QEMU
```
$ sudo apt-get install qemu
$ qemu-system-x86_64 -version
QEMU emulator version 2.0.0 ...
```

## Quick start

* Run linux kernel on QEMU

```
$ qemu-system-x86_64 -kernel bzImage -hda rootfs.ext4 -append "root=/dev/sda"
```

CPU without APIC

```
$ qemu-system-x86_64 -kernel bzImage -hda rootfs.ext4 -append "root=/dev/sda" --no-acpi
```
* Exploit the platform

```
/a.out
```

## Browse rootfs.ext4

```
$ sudo mount -w -o loop rootfs.ext4 ./ajrootfs/
$ sudo unmount ./ajrootfs/
```

## Resize rootfs.ext4

```
$ e2fsck -f rootfs.ext4
$ resize2fs rootfs.ext4 5M
```

## Disk utilization

need mount rootfs.ext4 to the ajrootfs directory
```
$ df ajrootfs/
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/loop0                4879      4180       444  91% /.../ajrootfs
```



